@startuml
class AppleStoreImpl {
    + SetNativeStore(apple:INativeAppleStore) : void
    + appReceipt : string? <<get>>
    + canMakePayments : bool <<get>>
    + SetApplePromotionalPurchaseInterceptorCallback(callback:Action<Product>) : void
    + simulateAskToBuy : bool <<get>> <<set>>
    + <<virtual>> FetchStorePromotionOrder(successCallback:Action<List<Product>>, errorCallback:Action) : void
    + <<virtual>> FetchStorePromotionVisibility(product:Product, successCallback:Action<string, AppleStorePromotionVisibility>, errorCallback:Action) : void
    + <<virtual>> SetStorePromotionOrder(products:List<Product>) : void
    + SetStorePromotionVisibility(product:Product, visibility:AppleStorePromotionVisibility) : void
    + GetTransactionReceiptForProduct(product:Product) : string
    + SetApplicationUsername(applicationUsername:string) : void
    + <<override>> OnProductsRetrieved(json:string) : void
    + <<virtual>> RestoreTransactions(callback:Action<bool>?) : void
    + <<virtual>> RestoreTransactions(callback:Action<bool, string?>?) : void
    + <<virtual>> RefreshAppReceipt(successCallback:Action<string>, errorCallback:Action<string>) : void
    + <<virtual>> RefreshAppReceipt(successCallback:Action<string>, errorCallback:Action) : void
    + RegisterPurchaseDeferredListener(callback:Action<Product>) : void
    + SetEntitlementsRevokedListener(callback:Action<List<Product>>) : void
    + <<virtual>> ContinuePromotionalPurchases() : void
    + GetIntroductoryPriceDictionary() : Dictionary<string, string>
    + GetProductDetails() : Dictionary<string, string>
    + <<virtual>> PresentCodeRedemptionSheet() : void
    + OnPurchaseDeferred(productId:string) : void
    + OnPromotionalPurchaseAttempted(productId:string) : void
    + OnTransactionsRestoredSuccess() : void
    + OnTransactionsRestoredFail(error:string) : void
    + OnAppReceiptRetrieved(receipt:string) : void
    + OnAppReceiptRefreshedFailed(error:string) : void
    + OnFetchStorePromotionOrderSucceeded(productIds:string) : void
    + OnFetchStorePromotionOrderFailed() : void
    + OnFetchStorePromotionVisibilitySucceeded(result:String) : void
    + OnFetchStorePromotionVisibilityFailed() : void
    + OnPurchaseSucceeded(id:string, receipt:string, transactionId:string, originalTransactionId:string, isRestored:bool) : void
}
JSONStore <|-- AppleStoreImpl
IAppleExtensions <|-- AppleStoreImpl
IAppleConfiguration <|-- AppleStoreImpl
@enduml
